<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Quality Predictor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: '#4F46E5',
                        brandDark: '#4338CA',
                    },
                    keyframes: {
                        'gradient-shift': {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        }
                    },
                    animation: {
                        'gradient-shift': 'gradient-shift 15s ease infinite',
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom styles for the live gradient background */
        body {
            background: linear-gradient(-45deg, #FF7F50, #6495ED, #8A2BE2, #00CED1);
            background-size: 400% 400%;
            animation: gradient-shift 15s ease infinite;
        }

        /* Styling for the card itself, adding a frosted glass effect */
        .card-container {
            background-color: rgba(255, 255, 255, 0.2); /* Semi-transparent white */
            backdrop-filter: blur(10px); /* Frosted glass effect */
            -webkit-backdrop-filter: blur(10px); /* For Safari */
            border: 1px solid rgba(255, 255, 255, 0.3); /* Subtle border */
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); /* Enhanced shadow */
        }

        /* Adjust select styles for better translucency */
        select {
            background-color: rgba(255, 255, 255, 0.8);
            border-color: rgba(255, 255, 255, 0.5);
        }
        select:focus {
            border-color: #4F46E5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
        }

        /* Adjust button for consistency */
        button[type="submit"] {
            background-color: #4F46E5;
        }
        button[type="submit"]:hover {
            background-color: #4338CA;
        }

        /* Header within the card */
        .card-header {
            background-color: rgba(79, 70, 229, 0.7); /* Slightly transparent brand color */
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="card-container rounded-xl w-full max-w-2xl overflow-hidden">
        <div class="card-header p-6 text-center">
            <h1 class="text-2xl font-bold text-white">Car Quality Evaluator</h1>
            <p class="text-indigo-100 mt-2">Enter vehicle details to predict its classification</p>
        </div>

        <form id="predictionForm" class="p-8 space-y-6">
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-100 mb-2">Buying Price</label>
                    <select name="buying" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand focus:border-brand outline-none transition">
                        <option value="low">Low</option>
                        <option value="med">Medium</option>
                        <option value="high">High</option>
                        <option value="vhigh">Very High</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-100 mb-2">Maintenance Cost</label>
                    <select name="maint" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand focus:border-brand outline-none transition">
                        <option value="low">Low</option>
                        <option value="med">Medium</option>
                        <option value="high">High</option>
                        <option value="vhigh">Very High</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-100 mb-2">Number of Doors</label>
                    <select name="doors" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand focus:border-brand outline-none transition">
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5more">5 or more</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-100 mb-2">Capacity (Persons)</label>
                    <select name="persons" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand focus:border-brand outline-none transition">
                        <option value="2">2</option>
                        <option value="4">4</option>
                        <option value="more">More</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-100 mb-2">Luggage Boot Size</label>
                    <select name="lug_boot" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand focus:border-brand outline-none transition">
                        <option value="small">Small</option>
                        <option value="med">Medium</option>
                        <option value="big">Big</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-100 mb-2">Safety Rating</label>
                    <select name="safety" class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand focus:border-brand outline-none transition">
                        <option value="low">Low</option>
                        <option value="med">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
            </div>

            <button type="submit" class="w-full text-white font-bold py-3 px-4 rounded-lg transition duration-200 transform hover:scale-[1.02]">
                Predict Quality
            </button>
        </form>

        <div id="resultContainer" class="hidden bg-gray-100 p-6 border-t border-gray-200">
            <div class="text-center">
                <p class="text-sm text-gray-500 uppercase tracking-wide font-semibold">Prediction Result</p>
                <h2 id="predictionText" class="text-3xl font-bold text-gray-800 mt-2">-</h2>
                <div id="predictionBadge" class="mt-4 inline-block px-4 py-1 rounded-full text-sm font-semibold">
                    Class ID: <span id="classId">-</span>
                </div>
            </div>
        </div>
        
        <div id="errorContainer" class="hidden bg-red-50 p-4 border-t border-red-100 text-center">
            <p id="errorText" class="text-red-600 font-medium"></p>
        </div>
    </div>

    <script>
        document.getElementById('predictionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            
            const resultContainer = document.getElementById('resultContainer');
            const errorContainer = document.getElementById('errorContainer');
            const predictionText = document.getElementById('predictionText');
            const classIdText = document.getElementById('classId');
            const badge = document.getElementById('predictionBadge');

            // Reset UI
            resultContainer.classList.add('hidden');
            errorContainer.classList.add('hidden');

            try {
                // Assuming the Flask app is running on localhost:5000
                const response = await fetch('http://127.0.0.1:5000/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (!response.ok) {
                    throw new Error(result.error || 'Network response was not ok');
                }

                // Display Success
                predictionText.innerText = result.prediction;
                classIdText.innerText = result.class_id;
                
                // Display Success
                predictionText.innerText = result.prediction;
                classIdText.innerText = result.class_id;
                
                // Styling based on result
                let badgeColor = 'bg-gray-200 text-gray-800';
                
                // logic updated to match new human-readable names
                if (result.prediction === 'Unacceptable') {
                    badgeColor = 'bg-red-100 text-red-800';
                } else if (result.prediction === 'Acceptable') {
                    badgeColor = 'bg-yellow-100 text-yellow-800';
                } else if (result.prediction === 'Good') {
                    badgeColor = 'bg-blue-100 text-blue-800';
                } else if (result.prediction === 'Very Good') {
                    badgeColor = 'bg-green-100 text-green-800';
                }
                
                badge.className = `mt-4 inline-block px-4 py-1 rounded-full text-sm font-semibold ${badgeColor}`;
                resultContainer.classList.remove('hidden');

            } catch (error) {
                console.error('Error:', error);
                document.getElementById('errorText').innerText = `Error: ${error.message}. Is the Flask server running?`;
                errorContainer.classList.remove('hidden');
            }
        });
    </script>
</body>
</html>